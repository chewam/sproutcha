<!DOCTYPE html>
<html>
    <head>
        <title>sproutcha :: mvc :: sproutcore</title>
        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">

        <script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.min.js" type="text/javascript"></script>
        <script src="assets/ember-datastore.js" type="text/javascript"></script>
        <script src="assets/ember-sparsearray.js" type="text/javascript"></script>
        <script src="assets/loader.js" type="text/javascript"></script>

        <style>
            div, table, tr, td, th {
                outline: none;
            }

            .container {
                width: 480px;
                margin-top: 20px;
            }

            .info {
                float: right;
            }

            .info div {
                font-size: .9em;
                text-align: right;
            }

            .x-clear {
                clear: both;
            }
        </style>
    </head>

    <body>
        <script type="text/javascript">
          App = Ember.Application.create({
            store: Ember.Store.create().from('App.DataSource'),

            loadError: function(xhr) {
              $.holdReady(true);
              Ember.Logger.error('Modules Loading Error: %@'.fmt(xhr.responseText));
            },

            ready: function() {
              /**
               * Create a View from the loaded template
               */
              Ember.View.create({
                templateName: 'application',
                classNames: ['container']
              }).append();

              /**
               * Populate the store
               */
              App.Employees.set('contentObjects',
                App.store.find(Ember.Query.remote(App.Employee)));
            }
          });

          //SC.Loader.set('delegate', App);

          Loader.load(
            'mvc/templates/application.hbs',
            'mvc/store/data_source.js',
            'mvc/models/employee.js',
            'mvc/models/company.js',
            'mvc/controllers/employees.js',
            'mvc/views/list.js',
            'mvc/views/toolbar.js'
          );
        </script>
    </body>
</html>
